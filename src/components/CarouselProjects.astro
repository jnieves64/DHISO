<section id="Proyectos">
    <header>
        <h2>PROYECTOS</h2>
    </header>
    <div class="containerCarrusel">
        <div class="itemCarrusel">
            <img src="img1.png" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img src="img2.png" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img src="img3.png" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img src="img4.png" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img src="img5.png" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img src="img6.png" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img src="img7.jpg" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img src="img8.jpg" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img src="img9.jpg" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img src="img10.jpg" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img src="img11.jpg" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img src="img12.jpg" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img src="img13.jpg" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img src="img14.jpg" alt="Proyecto Costa Cachagua - Cantagua" />
            <p>Proyecto Costa Cachagua - Cantagua</p>
        </div>
        <div class="itemCarrusel">
            <img
                src="img15.jpg"
                alt="Proyecto Casa P - Barrio Residencial Monte Sagrado"
            />
            <p>Proyecto Casa P - Barrio Residencial Monte Sagrado</p>
        </div>
        <div class="itemCarrusel">
            <img
                src="img16.jpg"
                alt="Proyecto Casa P - Barrio Residencial Monte Sagrado"
            />
            <p>Proyecto Casa P - Barrio Residencial Monte Sagrado</p>
        </div>
        <div class="itemCarrusel">
            <img
                src="img17.jpg"
                alt="Proyecto Casa P - Barrio Residencial Monte Sagrado"
            />
            <p>Proyecto Casa P - Barrio Residencial Monte Sagrado</p>
        </div>
        <div class="itemCarrusel">
            <img
                src="img19.jpg"
                alt="Proyecto Casa P - Barrio Residencial Monte Sagrado"
            />
            <p>Proyecto Casa P - Barrio Residencial Monte Sagrado</p>
        </div>
    </div>
    <div class="modal" id="modal">
        <div class="modal-content">
            <svg
                class="close-btn"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
            >
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path
                    d="M12 2l.324 .001l.318 .004l.616 .017l.299 .013l.579 .034l.553 .046c4.785 .464 6.732 2.411 7.196 7.196l.046 .553l.034 .579c.005 .098 .01 .198 .013 .299l.017 .616l.005 .642l-.005 .642l-.017 .616l-.013 .299l-.034 .579l-.046 .553c-.464 4.785 -2.411 6.732 -7.196 7.196l-.553 .046l-.579 .034c-.098 .005 -.198 .01 -.299 .013l-.616 .017l-.642 .005l-.642 -.005l-.616 -.017l-.299 -.013l-.579 -.034l-.553 -.046c-4.785 -.464 -6.732 -2.411 -7.196 -7.196l-.046 -.553l-.034 -.579a28.058 28.058 0 0 1 -.013 -.299l-.017 -.616c-.003 -.21 -.005 -.424 -.005 -.642l.001 -.324l.004 -.318l.017 -.616l.013 -.299l.034 -.579l.046 -.553c.464 -4.785 2.411 -6.732 7.196 -7.196l.553 -.046l.579 -.034c.098 -.005 .198 -.01 .299 -.013l.616 -.017c.21 -.003 .424 -.005 .642 -.005zm-1.489 7.14a1 1 0 0 0 -1.218 1.567l1.292 1.293l-1.292 1.293l-.083 .094a1 1 0 0 0 1.497 1.32l1.293 -1.292l1.293 1.292l.094 .083a1 1 0 0 0 1.32 -1.497l-1.292 -1.293l1.292 -1.293l.083 -.094a1 1 0 0 0 -1.497 -1.32l-1.293 1.292l-1.293 -1.292l-.094 -.083z"
                    fill="currentColor"
                    stroke-width="0"></path>
            </svg>
            <img src="" alt="" id="modal-img" />
            <p id="modal-description"></p>
        </div>
    </div>
    <div class="controlsCarrusel_left">
        <svg
            width="44"
            height="44"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="#FFF"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
        >
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M15 6l-6 6l6 6"></path>
        </svg>
    </div>
    <div class="controlsCarrusel_right">
        <svg
            width="44"
            height="44"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="#FFF"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
        >
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M9 6l6 6l-6 6"></path>
        </svg>
    </div>
</section>

<style>
    section {
        position: relative;
        padding: 30px 25px;
        height: auto;
        width: 100%;
        background-color: var(--light-blue);
        background-image: url("https://dhiso.vercel.app/fondo2.png");
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center center;
        background-blend-mode: multiply;
    }
    header {
        width: 100%;
        display: flex;
        margin-bottom: 20px;
    }
    header h2 {
        border-top: 3px solid var(--red);
        font-family: var(--cocogoose-light);
        font-weight: bold;
        font-size: 3.2rem;
        color: white;
    }
    .containerCarrusel {
        display: flex;
        justify-content: space-between;
        flex-wrap: nowrap;
        height: auto;
        overflow-x: scroll;
        scroll-snap-type: x proximity;
    }
    .containerCarrusel::-webkit-scrollbar {
        display: none;
    }
    .itemCarrusel {
        min-width: 100%;
        height: auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        gap: 20px;
        scroll-snap-align: start;
    }
    .itemCarrusel img {
        width: 100%;
        height: 100%;
        max-height: 400px;
        object-fit: cover;
        object-position: center;
    }
    .itemCarrusel p {
        font-family: var(--cocogoose-light);
        font-size: 1.6rem;
        font-weight: 500;
        line-height: 1.8rem;
        color: #fff;
    }
    .modal {
        display: none;
        padding: 20px;
        position: fixed;
        z-index: 99;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        width: 95%;
        max-width: 1240px;
        height: auto;
        max-height: 95%;
        background-color: var(--light-blue);
        border-radius: 25px;
        transition: all 0.5s ease-in-out;
    }
    .modal-content {
        display: flex;
        max-width: 100%;
        height: 100%;
        max-height: 100%;
        flex-direction: column;
        align-items: center;
        gap: 20px;
    }
    .modal-content svg {
        cursor: pointer;
        color: #fff;
        height: 40px;
        transition: all 0.3s ease-in-out;
    }
    .modal-content svg:hover {
        color: var(--red);
        scale: 1.08;
    }
    .modal-content img {
        width: auto;
        max-width: 100%;
        height: auto;
        max-height: 75vh;
    }
    .modal-content p {
        font-family: var(--cocogoose-light);
        font-weight: 500;
        font-size: 1.8rem;
        line-height: 2rem;
        text-align: center;
        color: #fff;
    }
    .controlsCarrusel_left {
        position: absolute;
        top: 50%;
        left: 15px;
    }
    .controlsCarrusel_left svg {
        cursor: pointer;
    }
    .controlsCarrusel_right {
        position: absolute;
        top: 50%;
        right: 15px;
    }
    .controlsCarrusel_right svg {
        cursor: pointer;
    }
    @media only screen and (min-width: 901px) {
        section {
            padding: 70px 90px;
        }
        section header {
            max-width: 1120px;
            margin: 0 auto 100px;
        }
        header h2 {
            font-size: 3.9rem;
        }
        .containerCarrusel {
            margin: 0 auto;
            height: auto;
            max-width: 1120px;
            gap: calc(100% - 96%);
        }
        .itemCarrusel {
            min-width: 48%;
        }
        .controlsCarrusel_left {
            left: 5%;
        }
        .controlsCarrusel_right {
            right: 5%;
        }
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const container = document.querySelector(".containerCarrusel");
        const controlsLeft = document.querySelector(".controlsCarrusel_left");
        const controlsRight = document.querySelector(".controlsCarrusel_right");

        function calculateScrollAmount() {
            const containerWidth = container.offsetWidth;
            const firstItem = container.querySelector(".itemCarrusel");
            const itemWidth = firstItem.offsetWidth;
            const containerPadding =
                parseFloat(getComputedStyle(container).paddingLeft) * 2;
            let scrollAmount = itemWidth - containerPadding;

            if (window.innerWidth > 900) {
                const gap = containerWidth - 2 * itemWidth;
                scrollAmount += gap;
            }

            return scrollAmount;
        }

        controlsLeft.addEventListener("click", () => {
            const scrollAmount = calculateScrollAmount();
            container.scrollBy({ left: -scrollAmount, behavior: "smooth" });
        });

        controlsRight.addEventListener("click", () => {
            const scrollAmount = calculateScrollAmount();
            container.scrollBy({ left: scrollAmount, behavior: "smooth" });
        });

        const items = document.querySelectorAll(
            ".containerCarrusel .itemCarrusel",
        );
        const modal = document.getElementById("modal");
        const modalImg = document.getElementById("modal-img");
        const modalDescription = document.getElementById("modal-description");
        const closeBtn = document.querySelector(".close-btn");

        items.forEach((item) => {
            item.addEventListener('click', () => {
                const imgSrc = item.querySelector('img').src;
                const description = item.querySelector('p').textContent;
                modalImg.src = imgSrc;
                modalDescription.textContent = description
                modal.style.display = 'block';
            });
        });

        closeBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        window.addEventListener("click", function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    });
    });
</script>
